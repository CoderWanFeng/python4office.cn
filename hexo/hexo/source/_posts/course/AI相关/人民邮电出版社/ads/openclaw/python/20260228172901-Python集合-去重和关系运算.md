---
title: Python集合：我用这个数据结构，去重只要1行代码
date: 2026-02-28 17:29:00
tags: [Python基础, 集合, 数据结构]
---

<p align="center" id='扫码查看 AI 编程训练营'>
    <a target="_blank" href='https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ'>
    <img src="https://raw.atomgit.com/user-images/assets/5027920/9209df5a-99d2-40dc-af34-b10b43be9026/12-ai.jpg" />
    </a>   
</p>

<p align="center" name="atomgit">
    <a target="_blank" href='https://github.com/CoderWanFeng/python-office'>
    <img src="https://img.shields.io/github/stars/CoderWanFeng/python-office.svg?style=social" alt="github star"/>
    </a>
    	<a target="_blank" href='https://gitee.com/CoderWanFeng//python-office/'>
		<img src='https://gitee.com/CoderWanFeng//python-office/badge/star.svg?theme=dark' alt='gitee star'/>
	</a>
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
		<img src='https://atomgit.com/CoderWanFeng1/python-office/star/2025top.svg?theme=dark' alt='atomgit star'/>
	</a>	
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
<img src="https://static.pepy.tech/badge/python-office" alt="PyPI Downloads">
</a>
<a href="https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ">
  <img src="https://img.shields.io/badge/学习-AI 编程-red" alt="AI 编程">
</a>
    	<a href="http://www.python4office.cn/wechat-group/">
  <img src="https://img.shields.io/badge/加入-AI 交流群-brightgreen" alt="AI 交流群">
</a>

</p>

<!-- more -->

大家好，我是正在实战各种AI项目的程序员晚枫。

今天聊一个Python中经常被忽视的数据结构——**集合（set）**。

很多人学Python时跳过了它，觉得用列表就够了。但你知道吗？**集合的去重功能，一行代码就能搞定，而且速度飞快！**

看完这篇文章，你会发现新大陆。

---

## 什么是集合？

集合就像数学里的集合概念：
- **无序**：没有索引，不能通过位置访问
- **不重复**：自动去重，相同的元素只保留一个
- **可变**：可以添加、删除元素

### 创建集合
```python
# 方式1：花括号
s1 = {1, 2, 3, 3, 3}  # 重复的3会被自动去重
print(s1)  # {1, 2, 3}

# 方式2：set函数
s2 = set([1, 2, 2, 3, 3, 3])
print(s2)  # {1, 2, 3}

# 空集合（注意：{}是字典！）
empty = set()  # 正确
# empty = {}   # 错误，这是空字典
```

---

## 最常用功能：一键去重

### 列表去重（传统方法）
```python
numbers = [1, 2, 2, 3, 3, 3, 4, 4, 4, 4]

# 方法1：循环判断（麻烦）
unique = []
for n in numbers:
    if n not in unique:
        unique.append(n)

# 方法2：用字典（稍好）
unique = list(dict.fromkeys(numbers))
```

### 集合去重（终极方案）
```python
numbers = [1, 2, 2, 3, 3, 3, 4, 4, 4, 4]
unique = list(set(numbers))
print(unique)  # [1, 2, 3, 4]
```

**就这一行！简洁又高效。**

---

## 集合的关系运算（超实用）

集合最强大的功能是**关系运算**，处理"谁和谁有交集"这类问题特别方便。

### 场景：找出共同好友
```python
alice_friends = {'Bob', 'Charlie', 'David'}
bob_friends = {'Alice', 'Charlie', 'Eve'}

# 共同好友（交集）
common = alice_friends & bob_friends
print(common)  # {'Charlie'}

# Alice的所有好友（并集）
all_friends = alice_friends | bob_friends
print(all_friends)  # {'Bob', 'Charlie', 'David', 'Alice', 'Eve'}

# 只在Alice的好友（差集）
only_alice = alice_friends - bob_friends
print(only_alice)  # {'Bob', 'David'}

# 不是共同好友的（对称差集）
not_common = alice_friends ^ bob_friends
print(not_common)  # {'Bob', 'David', 'Alice', 'Eve'}
```

### 运算符对照表

| 运算符 | 方法 | 含义 |
|-------|------|------|
| `&` | `intersection()` | 交集（共同元素） |
| `\|` | `union()` | 并集（所有元素） |
| `-` | `difference()` | 差集（在前不在后） |
| `^` | `symmetric_difference()` | 对称差集（不共有的） |

---

## 实战案例：数据分析中的集合应用

假设你有两个销售数据文件，想找出：
1. 两个文件都有的客户
2. 只在A文件中的客户
3. 总共多少不同客户

```python
# 从Excel读取的客户ID
file_a_customers = {1001, 1002, 1003, 1004, 1005}
file_b_customers = {1004, 1005, 1006, 1007, 1008}

# 共同客户
both = file_a_customers & file_b_customers
print(f"两个文件都有的客户：{len(both)}人")

# 只在A文件
only_a = file_a_customers - file_b_customers
print(f"只在A文件的客户：{len(only_a)}人")

# 总客户数
total = len(file_a_customers | file_b_customers)
print(f"总客户数：{total}人")
```

**用集合，3行代码搞定复杂分析！**

---

## 集合的其他操作

### 添加和删除
```python
s = {1, 2, 3}

# 添加元素
s.add(4)        # {1, 2, 3, 4}
s.update([5, 6])  # {1, 2, 3, 4, 5, 6}

# 删除元素
s.remove(3)     # 元素不存在会报错
s.discard(10)   # 元素不存在不会报错
s.pop()         # 随机删除一个（集合无序）
```

### 判断操作
```python
a = {1, 2, 3}
b = {1, 2}

print(b.issubset(a))      # True，b是a的子集
print(a.issuperset(b))    # True，a是b的超集
print(a.isdisjoint(b))    # False，a和b有交集
```

---

## 什么时候用集合？

### ✅ 适合用集合的场景
- 需要去重
- 判断成员是否存在（比列表快）
- 求交集、并集、差集
- 需要确保元素唯一性

### ❌ 不适合用集合的场景
- 需要保持顺序（集合无序）
- 需要通过索引访问
- 需要存储可变对象（如列表）

---

## 推荐：AI Python零基础实战营

想系统学习Python数据结构？

**课程内容：**
- ✅ Python基础语法
- ✅ 四大数据结构详解（列表、字典、集合、元组）
- ✅ 算法与复杂度分析
- ✅ 数据处理实战

🎁 **限时福利**：送《Python编程从入门到实践》实体书

👉 **[点击了解详情](https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ)**

---

## 相关阅读

- [Python列表推导式：一行代码搞定循环](/course/AI相关/人民邮电出版社/ads/openclaw/20260228172601-Python列表推导式-一行代码搞定循环/)
- [Python字典：我用这个数据结构，把查询速度提升了100倍](/course/AI相关/人民邮电出版社/ads/openclaw/20260228172701-Python字典-被低估的数据结构/)
- [Python函数参数*args和**kwargs详解](/course/AI相关/人民邮电出版社/ads/openclaw/20260228172801-Python函数参数-args-kwargs-终极指南/)

---

*PS：集合是Python最被低估的数据结构之一。记住一句话：要去重用set，要快用set，要做关系运算还是用set！*
