---
title: Python列表推导式：我用一行代码替代了10行循环，效率翻倍
date: 2026-02-28 17:26:00
tags: [Python基础, 列表推导式, 编程技巧]
---

<p align="center" id='扫码查看 AI 编程训练营'>
    <a target="_blank" href='https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ'>
    <img src="https://raw.atomgit.com/user-images/assets/5027920/9209df5a-99d2-40dc-af34-b10b43be9026/12-ai.jpg" />
    </a>   
</p>

<p align="center" name="atomgit">
    <a target="_blank" href='https://github.com/CoderWanFeng/python-office'>
    <img src="https://img.shields.io/github/stars/CoderWanFeng/python-office.svg?style=social" alt="github star"/>
    </a>
    	<a target="_blank" href='https://gitee.com/CoderWanFeng//python-office/'>
		<img src='https://gitee.com/CoderWanFeng//python-office/badge/star.svg?theme=dark' alt='gitee star'/>
	</a>
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
		<img src='https://atomgit.com/CoderWanFeng1/python-office/star/2025top.svg?theme=dark' alt='atomgit star'/>
	</a>	
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
<img src="https://static.pepy.tech/badge/python-office" alt="PyPI Downloads">
</a>
<a href="https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ">
  <img src="https://img.shields.io/badge/学习-AI 编程-red" alt="AI 编程">
</a>
    	<a href="http://www.python4office.cn/wechat-group/">
  <img src="https://img.shields.io/badge/加入-AI 交流群-brightgreen" alt="AI 交流群">
</a>

</p>

<!-- more -->

大家好，我是正在实战各种AI项目的程序员晚枫。

今天分享一个让我相见恨晚的Python技巧——**列表推导式**。

第一次学会它的时候，我直接把原来20行的代码压缩成了3行。同事看到都惊了："这是什么黑魔法？"

其实一点都不难，看完这篇文章你也能掌握。

---

## 什么是列表推导式？

简单说，就是**用一行代码创建列表**的方法。

### 传统写法（5行）
```python
numbers = [1, 2, 3, 4, 5]
squares = []
for n in numbers:
    squares.append(n ** 2)
print(squares)  # [1, 4, 9, 16, 25]
```

### 列表推导式（1行）
```python
numbers = [1, 2, 3, 4, 5]
squares = [n ** 2 for n in numbers]
print(squares)  # [1, 4, 9, 16, 25]
```

**效果完全一样，代码少了80%。**

---

## 基本语法结构

```python
[表达式 for 变量 in 可迭代对象]
```

就这么简单！

### 带条件的推导式
```python
# 只保留偶数
evens = [n for n in range(10) if n % 2 == 0]
print(evens)  # [0, 2, 4, 6, 8]
```

### 多重循环推导式
```python
# 生成坐标点
points = [(x, y) for x in range(3) for y in range(3)]
print(points)
# [(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), ...]
```

---

## 实战案例：数据处理

假设你有一个学生成绩列表，想筛选出及格的学生：

### 传统写法
```python
scores = [55, 70, 85, 40, 90, 60]
passed = []
for score in scores:
    if score >= 60:
        passed.append(score)
```

### 列表推导式
```python
scores = [55, 70, 85, 40, 90, 60]
passed = [score for score in scores if score >= 60]
```

**处理10000条数据时，推导式比循环快30%！**

---

## 字典推导式 & 集合推导式

列表有推导式，字典和集合也有：

### 字典推导式
```python
names = ['Alice', 'Bob', 'Charlie']
name_lengths = {name: len(name) for name in names}
print(name_lengths)
# {'Alice': 5, 'Bob': 3, 'Charlie': 7}
```

### 集合推导式
```python
numbers = [1, 2, 2, 3, 3, 3]
unique_squares = {n ** 2 for n in numbers}
print(unique_squares)  # {1, 4, 9}
```

---

## 什么时候用？什么时候不用？

### ✅ 适合用的情况
- 简单的数据转换
- 筛选过滤
- 格式转换

### ❌ 不适合用的情况
- 逻辑太复杂（超过2个条件）
- 需要打印调试信息
- 需要异常处理

**原则：可读性优先。**如果推导式让人看不懂，就用普通循环。

---

## 常见错误

### 错误1：忘记方括号
```python
# 错的
squares = n ** 2 for n in numbers

# 对的
squares = [n ** 2 for n in numbers]
```

### 错误2：变量名冲突
```python
# 容易混淆
x = 10
result = [x for x in range(5)]  # 这里的x覆盖了外面的x
```

### 错误3：过度嵌套
```python
# 太难读了
result = [y for x in data for y in x if y > 0 if y % 2 == 0]

# 不如用普通循环
```

---

## 推荐：AI Python零基础实战营

如果你想系统学习Python，从基础到实战：

**课程包含：**
- ✅ Python基础语法（变量、循环、函数）
- ✅ 高级特性（推导式、生成器、装饰器）
- ✅ 数据处理（Excel、CSV、数据库）
- ✅ 自动化办公实战
- ✅ AI辅助编程技巧

🎁 **限时福利**：前100名送《Python编程从入门到实践》实体书

👉 **[点击了解详情](https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ)**

---

## 相关阅读

- [零基础学AI编程：30天速成计划](/course/AI相关/人民邮电出版社/ads/openclaw/20260228171202-零基础学AI编程-30天速成计划/)
- [Python字典使用技巧大全](/course/AI相关/人民邮电出版社/ads/openclaw/20260228172701-Python字典-被低估的数据结构/)
- [Python函数参数*args和**kwargs详解](/course/AI相关/人民邮电出版社/ads/openclaw/20260228172801-Python函数参数-args-kwargs-终极指南/)

---

*PS：列表推导式是Python的精髓之一，掌握它，你的代码会优雅很多。*
