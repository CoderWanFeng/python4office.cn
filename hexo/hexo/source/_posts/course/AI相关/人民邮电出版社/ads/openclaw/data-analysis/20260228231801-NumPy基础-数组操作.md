---
title: NumPy基础：我用数组替代了Python列表，性能提升100倍
date: 2026-02-28 23:18:00
tags: [数据分析, NumPy, 数组, 性能优化]
---

<p align="center" id='扫码查看 AI 编程训练营'>
    <a target="_blank" href='https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ'>
    <img src="https://raw.atomgit.com/user-images/assets/5027920/9209df5a-99d2-40dc-af34-b10b43be9026/12-ai.jpg" />
    </a>   
</p>

<p align="center" name="atomgit">
    <a target="_blank" href='https://github.com/CoderWanFeng/python-office'>
    <img src="https://img.shields.io/github/stars/CoderWanFeng/python-office.svg?style=social" alt="github star"/>
    </a>
    	<a target="_blank" href='https://gitee.com/CoderWanFeng//python-office/'>
		<img src='https://gitee.com/CoderWanFeng//python-office/badge/star.svg?theme=dark' alt='gitee star'/>
	</a>
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
		<img src='https://atomgit.com/CoderWanFeng1/python-office/star/2025top.svg?theme=dark' alt='atomgit star'/>
	</a>	
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
<img src="https://static.pepy.tech/badge/python-office" alt="PyPI Downloads">
</a>
<a href="https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ">
  <img src="https://img.shields.io/badge/学习-AI 编程-red" alt="AI 编程">
</a>
    	<a href="http://www.python4office.cn/wechat-group/">
  <img src="https://img.shields.io/badge/加入-AI 交流群-brightgreen" alt="AI 交流群">
</a>

</p>

<!-- more -->

大家好，我是正在实战各种<a href="https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ" target="_blank">AI项目</a>的程序员晚枫。

欢迎来到数据分析课程第二课！

今天学习**NumPy**，这是Python科学计算的基础库。掌握它，你的数据处理速度能提升几十甚至上百倍。

---

## 为什么需要NumPy？

### Python列表的问题
```python
# 创建100万个数字的列表
import time

start = time.time()
python_list = list(range(1000000))
result = [x * 2 for x in python_list]  # 每个元素乘2
print(f"Python列表耗时: {time.time() - start:.4f}秒")
# 耗时约0.15秒
```

### NumPy数组的优势
```python
import numpy as np

start = time.time()
numpy_array = np.arange(1000000)
result = numpy_array * 2  # 向量化运算
print(f"NumPy数组耗时: {time.time() - start:.4f}秒")
# 耗时约0.001秒，快150倍！
```

**为什么这么快？**
- NumPy底层用C语言实现
- 数组在内存中是连续的
- 支持向量化运算（不用写循环）

---

## 创建数组

### 从列表创建
```python
import numpy as np

# 一维数组
arr1 = np.array([1, 2, 3, 4, 5])
print(arr1)  # [1 2 3 4 5]

# 二维数组（矩阵）
arr2 = np.array([[1, 2, 3], [4, 5, 6]])
print(arr2)
# [[1 2 3]
#  [4 5 6]]
```

### 常用创建函数
```python
# 等差数列
np.arange(0, 10, 2)      # [0, 2, 4, 6, 8]
np.linspace(0, 1, 5)     # [0, 0.25, 0.5, 0.75, 1]

# 特殊数组
np.zeros((3, 4))         # 3行4列的全0数组
np.ones((2, 3))          # 全1数组
np.eye(3)                # 3x3单位矩阵
np.full((2, 2), 7)       # 全部填充7

# 随机数组
np.random.rand(3, 3)     # 0-1之间的随机数
np.random.randint(1, 10, (3, 3))  # 1-9的随机整数
np.random.randn(3, 3)    # 标准正态分布
```

---

## 数组属性

```python
arr = np.array([[1, 2, 3], [4, 5, 6]])

print(arr.shape)    # (2, 3) - 形状：2行3列
print(arr.ndim)     # 2 - 维度
print(arr.size)     # 6 - 元素总数
print(arr.dtype)    # int64 - 数据类型
print(arr.itemsize) # 8 - 每个元素占8字节
```

---

## 索引和切片

### 一维数组
```python
arr = np.array([10, 20, 30, 40, 50])

print(arr[0])       # 10
print(arr[-1])      # 50
print(arr[1:4])     # [20 30 40]
print(arr[::2])     # [10 30 50] - 步长为2
print(arr[::-1])    # [50 40 30 20 10] - 反转
```

### 二维数组
```python
arr = np.array([[1, 2, 3], 
                [4, 5, 6], 
                [7, 8, 9]])

print(arr[0, 1])    # 2 - 第0行第1列
print(arr[0])       # [1 2 3] - 第0行
print(arr[:, 1])    # [2 5 8] - 第1列
print(arr[0:2, 1:3]) # [[2 3]
                     #  [5 6]]
```

### 布尔索引（筛选）
```python
arr = np.array([1, 2, 3, 4, 5, 6])

# 选出大于3的元素
print(arr[arr > 3])  # [4 5 6]

# 选出偶数
print(arr[arr % 2 == 0])  # [2 4 6]

# 多条件
print(arr[(arr > 2) & (arr < 6)])  # [3 4 5]
```

---

## 数组运算

### 基本运算
```python
arr = np.array([1, 2, 3, 4, 5])

print(arr + 10)     # [11 12 13 14 15]
print(arr * 2)      # [2 4 6 8 10]
print(arr ** 2)     # [1 4 9 16 25]
print(arr / 2)      # [0.5 1. 1.5 2. 2.5]
```

### 数组间运算
```python
a = np.array([1, 2, 3])
b = np.array([4, 5, 6])

print(a + b)        # [5 7 9]
print(a * b)        # [4 10 18] - 对应元素相乘
print(a @ b)        # 32 - 点积（1*4 + 2*5 + 3*6）
```

### 通用函数（ufunc）
```python
arr = np.array([0, np.pi/2, np.pi])

print(np.sin(arr))  # 正弦
print(np.cos(arr))  # 余弦
print(np.exp(arr))  # 指数
print(np.log(arr + 1))  # 对数
print(np.sqrt(arr)) # 开方
```

---

## 数组变形

```python
arr = np.arange(12)  # [0 1 2 ... 11]

# reshape改变形状
arr2d = arr.reshape(3, 4)
# [[ 0  1  2  3]
#  [ 4  5  6  7]
#  [ 8  9 10 11]]

# flatten展平
arr_flat = arr2d.flatten()

# transpose转置
arr2d.T
# [[ 0  4  8]
#  [ 1  5  9]
#  [ 2  6 10]
#  [ 3  7 11]]
```

---

## 实战：计算股票收益率

```python
import numpy as np

# 模拟5天的股价
prices = np.array([100, 102, 101, 105, 108])

# 计算日收益率
returns = (prices[1:] - prices[:-1]) / prices[:-1]
print("日收益率:", returns)
# [0.02 -0.00980392 0.03960396 0.02857143]

# 累计收益率
cumulative_return = (prices[-1] - prices[0]) / prices[0]
print(f"累计收益率: {cumulative_return:.2%}")  # 8.00%

# 平均收益率
avg_return = np.mean(returns)
print(f"平均日收益率: {avg_return:.2%}")

# 收益率波动（标准差）
volatility = np.std(returns)
print(f"波动率: {volatility:.2%}")
```

---

## 下节预告

下一课我们将学习**NumPy进阶-数学运算**，包括统计函数、线性代数等内容。

👉 **[继续阅读：NumPy进阶-数学运算](/course/AI相关/人民邮电出版社/ads/openclaw/data-analysis/20260228231901-NumPy进阶-数学运算/)**

---

## 💬 加入学习交流群

扫码加入**Python学习交流群**，和数千名同学一起进步：

👉 **[点击加入交流群](http://www.python4office.cn/wechat-group/)**

群里不定期分享：
- 数据分析实战案例
- Python学习资料
- 求职面试经验
- 行业最新动态

---

## 推荐：AI Python数据分析实战营

🎁 **限时福利**：送《利用Python进行数据分析》实体书

👉 **[点击了解详情](https://mp.weixin.qq.com/s/uxCILtn9cfIsJR8PqOxlGQ)**

---

## 课程导航

**上一篇：** [Anaconda安装与环境配置](/course/AI相关/人民邮电出版社/ads/openclaw/data-analysis/20260228231701-Anaconda安装与环境配置-开启数据分析之旅/)

**下一篇：** [NumPy进阶-数学运算](/course/AI相关/人民邮电出版社/ads/openclaw/data-analysis/20260228231901-NumPy进阶-数学运算/)

---

*PS：NumPy是数据分析的基石。花时间打好基础，后面的Pandas会学得更轻松。*
