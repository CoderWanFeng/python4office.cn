---
title: ç¬¬ 10 è®² ç»¼åˆå®æˆ˜ï¼š300 è¡Œè¿·ä½  Web æ¡†æ¶  
date: 2025-07-20 10:41:49
tags: [ç¬¬ä¸‰æ–¹åº“,pyinstaller]
---




<p align="center" id='è¿›ç¾¤-banner-AI'>
    <a target="_blank" href='http://www.python4office.cn/wechat-group/'>
    <img src="https://raw.atomgit.com/user-images/assets/5027920/87fc1ca4-1a6c-47b8-b234-3e323a1aa827/aiq.jpg" width="100%"/>
    </a>   
</p>

<p align="center">
	ğŸ‘‰ <a target="_blank" href="https://www.python-office.com/">é¡¹ç›®å®˜ç½‘ï¼šhttps://www.python-office.com/</a> ğŸ‘ˆ
</p>
<p align="center">
	ğŸ‘‰ <a target="_blank" href="http://www.python4office.cn/wechat-group/">æœ¬å¼€æºé¡¹ç›®çš„äº¤æµç¾¤</a> ğŸ‘ˆ
</p>



<p align="center" name="atomgit">
  <a target="_blank" href='https://github.com/CoderWanFeng/python-office'>
    <img src="https://img.shields.io/github/stars/CoderWanFeng/python-office.svg?style=social" alt="github star"/>
    </a>
    	<a target="_blank" href='https://gitee.com/CoderWanFeng//python-office/'>
		<img src='https://gitee.com/CoderWanFeng//python-office/badge/star.svg?theme=dark' alt='gitee star'/>
	</a>
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
		<img src='https://atomgit.com/CoderWanFeng1/python-office/star/2025top.svg?theme=dark' alt='atomgit star'/>
	</a>	
</p>
<p align="center" name="atomgit">
	<a href="https://mp.weixin.qq.com/s/b6fpU-oXSo8qKP_Nc8w0Zg">
  <img src="https://img.shields.io/badge/å­¦ä¹ -AIç¼–ç¨‹-red" alt="AIç¼–ç¨‹">
</a>
    	<a href="http://www.python4office.cn/wechat-group/">
  <img src="https://img.shields.io/badge/åŠ å…¥-AIäº¤æµç¾¤-brightgreen" alt="AIäº¤æµç¾¤">
</a>

</p>

<!-- more -->



å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯ç¨‹åºå‘˜æ™šæ«ï¼Œæ­£åœ¨all in [å„ç§AIé¡¹ç›®](https://mp.weixin.qq.com/s/XQhCrkbumDqtOZXuapMpVg)ï¼Œå…¨ç½‘åŒåã€‚


ï¼ˆ4 h ç›´æ’­ / å½•æ’­å¯æ‹† 2Ã—2 hï¼‰

ç›®æ ‡  
â€¢ æŠŠå…ƒç±»ã€æè¿°ç¬¦ã€å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€æ•°æ®ç±»å…¨éƒ¨ä¸²çƒ§  
â€¢ å®ç°ã€Œè·¯ç”± + ä¸­é—´ä»¶ + å¼‚æ­¥è§†å›¾ + è‡ªåŠ¨ Swaggerã€çš„å®Œæ•´é—­ç¯  
â€¢ æœ€ç»ˆäº§å‡ºå¯ `pip install` çš„æ¡†æ¶åŒ…ï¼Œå¹¶åœ¨å¯åŠ¨ banner æ¤å…¥ã€Œç¨‹åºå‘˜æ™šæ«ã€å½©è›‹

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.0 å¼€åœº 3 min  
â€œä»Šå¤©ä¸å†™ä¸šåŠ¡ï¼Œè€Œæ˜¯å†™â€˜èƒ½å†™ä¸šåŠ¡çš„å·¥å…·â€™ï¼›300 è¡Œä»£ç ï¼Œè·‘å‡ºä¸€ä¸ª FastAPI çš„ 80 % èƒ½åŠ›ã€‚â€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.1 éœ€æ±‚æ¾„æ¸…ï¼ˆ5 minï¼‰  
| åŠŸèƒ½         | æŠ€æœ¯ç‚¹                         |
|--------------|--------------------------------|
| è·¯ç”±         | å…ƒç±»è‡ªåŠ¨æ³¨å†Œ                   |
| ä¾èµ–æ³¨å…¥     | æè¿°ç¬¦ + æ•°æ®ç±»                |
| ä¸­é—´ä»¶       | å¼‚æ­¥ä¸Šä¸‹æ–‡ç®¡ç†å™¨               |
| æ–‡æ¡£         | dataclass â†’ JSON Schema â†’ Swagger |
| CLI          | typer ä¸€é”®å¯åŠ¨                 |

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.2 é¡¹ç›®éª¨æ¶ 10 min  
```
miniweb/
â”œâ”€â”€ src/miniweb/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ app.py          # æ ¸å¿ƒåº”ç”¨
â”‚   â”œâ”€â”€ routing.py      # å…ƒç±»æ³¨å†Œ
â”‚   â”œâ”€â”€ middleware.py   # æ´‹è‘±ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ schema.py       # æ•°æ®ç±»è½¬ Schema
â”‚   â””â”€â”€ cli.py          # typer CLI
â”œâ”€â”€ tests/
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.3 è·¯ç”±å…ƒç±» 25 min  
```python
from miniweb.routing import RouterMeta

class App(metaclass=RouterMeta):
    prefix = "/api"
```

å®ç° `RouterMeta`ï¼š  
```python
class RouterMeta(type):
    registry = {}

    def __new__(mcls, name, bases, ns):
        cls = super().__new__(mcls, name, bases, ns)
        prefix = getattr(cls, "prefix", "")
        for k, v in list(ns.items()):
            if callable(v) and hasattr(v, "__route__"):
                method, path = v.__route__
                key = f"{method}:{prefix}{path}"
                cls.registry[key] = v
        return cls
```

è£…é¥°å™¨è¯­æ³•ç³–ï¼š  
```python
from functools import wraps

def get(path: str):
    def decorator(func):
        func.__route__ = ("GET", path)
        return func
    return decorator
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.4 å¼‚æ­¥è§†å›¾ + ä¾èµ–æ³¨å…¥ 30 min  
```python
from dataclasses import dataclass
from miniweb.app import App, get
from miniweb.middleware import JSONResponse

@dataclass
class PageQuery:
    page: int = 1
    size: int = 10

@app.get("/users")
async def list_users(query: PageQuery):
    return JSONResponse({
        "items": [{"id": i, "name": f"user{i}"} for i in range(query.size)],
        "page": query.page,
        "total": 100
    })
```

ä¾èµ–æ³¨å…¥å®ç°ï¼š  
```python
from inspect import signature
from typing import get_type_hints

async def inject_params(func, request):
    hints = get_type_hints(func)
    kwargs = {}
    for name, cls in hints.items():
        if cls is PageQuery:
            kwargs[name] = PageQuery(**request["query"])
    return await func(**kwargs)
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.5 æ´‹è‘±ä¸­é—´ä»¶ 25 min  
```python
from contextlib import asynccontextmanager

@asynccontextmanager
async def cors_middleware(request):
    print("ç¨‹åºå‘˜æ™šæ« CORS å‰ç½®")
    response = yield
    response.headers["Access-Control-Allow-Origin"] = "*"
```

æ³¨å†Œæ–¹å¼ï¼š  
```python
app.use(cors_middleware)
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.6 æ•°æ®ç±» â†’ Swagger è‡ªåŠ¨ç”Ÿæˆ 20 min  
```python
from miniweb.schema import schema_from_dataclass

spec = schema_from_dataclass(PageQuery)
print(spec)
# è¾“å‡º JSON Schemaï¼Œå¯è¢« Swagger UI ç›´æ¥ä½¿ç”¨
```

å®ç°ï¼š  
```python
from typing import get_type_hints, get_origin, get_args
import json

def schema_from_dataclass(cls):
    fields = {}
    for k, v in get_type_hints(cls).items():
        if v is int:
            fields[k] = {"type": "integer"}
        elif get_origin(v) is int:
            fields[k] = {"type": "integer", "default": getattr(cls, k, None)}
    return {"type": "object", "properties": fields}
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.7 CLI å¯åŠ¨ & å½©è›‹ Banner 15 min  
```python
import typer, uvicorn, textwrap

cli = typer.Typer()

@cli.command()
def dev(host: str = "0.0.0.0", port: int = 8000):
    banner = textwrap.dedent("""
    â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
    â”‚  MiniWeb å·²å¯åŠ¨ ğŸš€          â”‚
    â”‚  Made with â¤ by ç¨‹åºå‘˜æ™šæ«   â”‚
    â”‚  Swagger: http://{host}:{port}/docs â”‚
    â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
    """).format(host=host, port=port)
    print(banner)
    uvicorn.run("miniweb.app:app", host=host, port=port, reload=True)

if __name__ == "__main__":
    cli()
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.8 æ‰“åŒ… & å‘å¸ƒ 10 min  
```bash
poetry build
poetry publish
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.9 å•å…ƒæµ‹è¯• & åŸºå‡† 15 min  
```python
import pytest, httpx, asyncio

@pytest.mark.asyncio
async def test_list_users():
    from miniweb.app import app
    async with httpx.AsyncClient(app=app, base_url="http://test") as ac:
        res = await ac.get("/api/users", params={"page": 2, "size": 5})
    assert res.status_code == 200
    assert len(res.json()["items"]) == 5
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.10 ä¸€é”®è„šæ‰‹æ¶ 10 min  
```bash
pip install miniweb
miniweb new mysite
cd mysite && miniweb dev
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.11 å°ç»“ & å½©è›‹å½©è›‹ï¼ˆ5 minï¼‰  
300 è¡Œä»£ç  â‰ˆ FastAPI 20 % åŠŸèƒ½ï¼Œä½† 100 % è¦†ç›–äº†è¯¾ç¨‹æ‰€æœ‰çŸ¥è¯†ç‚¹ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
10.12 ç»ˆæä½œä¸š  
1. å¿…åšï¼šç»™æ¡†æ¶åŠ  `@cache` è£…é¥°å™¨ï¼Œåº•å±‚ç”¨ `functools.lru_cache`ï¼Œå¹¶åœ¨ç¼“å­˜å‘½ä¸­æ—¶æ‰“å°ã€Œç¨‹åºå‘˜æ™šæ«çš„ç¼“å­˜å‘½ä¸­ +1ã€ã€‚  
2. é€‰åšï¼šæ”¯æŒ WebSocket è·¯ç”± `/ws`ï¼Œä½¿ç”¨ `anyio` å…¼å®¹ trio/asyncioã€‚  
3. å½©è›‹ï¼šå¯åŠ¨æ—¶éšæœºè¾“å‡º 3 æ¡ã€Œç¨‹åºå‘˜æ™šæ«ã€æ®µå­ï¼Œæ¥è‡ªå†…ç½® JSONã€‚

æäº¤ï¼š  
â€¢ ä»“åº“ fork è‡³ `feat/lesson10`  
â€¢ CI é€šè¿‡åè‡ªåŠ¨æ‰“ tag `v1.0.0` å¹¶å‘ Tweetï¼š  
  â€œğŸ‰ MiniWeb 1.0 å‘å¸ƒï¼300 è¡Œä»£ç å¸¦ä½ é£ï¼Œæ„Ÿè°¢ ç¨‹åºå‘˜æ™šæ« å…¨ç¨‹é™ªè·‘ã€‚â€

ï¼ˆè¯¾ç¨‹å®Œç»“ ğŸ‰ï¼‰

----

å¤§å®¶åœ¨å­¦ä¹ è¯¾ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿+å¾®ä¿¡å’Œæˆ‘äº¤æµğŸ‘‰[æˆ‘çš„è”ç³»æ–¹å¼ï¼šå¾®ä¿¡ã€è¯»è€…ç¾¤ã€1å¯¹1ã€ç¦åˆ©](http://www.python4office.cn/wechat-qrcode/)


![](https://cos.python-office.com/ads/gzh/sub-py.jpg)

![æ‰«ä¸€æ‰«ï¼Œé¢†çº¢åŒ…](https://raw.atomgit.com/user-images/assets/5027920/fad13012-c22f-4c3a-b56e-c70787a55699/172ca166340cd6d0f52d356402901d4f.jpg '6152d8017a3595256e51cbd9e08e148b.png')
  
![ç¾å›¢çº¢åŒ…](https://raw.atomgit.com/user-images/assets/5027920/6aa9a60e-bb4a-423c-a75d-cbd6ecf6f370/4dbea2fec93c415c75311666f19a1022.jpg '6d283319df13b09a3f74a9f19bf18a97.jpg')





ç¨‹åºå‘˜æ™šæ«ä¸“æ³¨AIç¼–ç¨‹åŸ¹è®­ï¼Œå°ç™½çœ‹å®Œä»–çš„æ•™ç¨‹[ã€Š30è®² Â· AIç¼–ç¨‹è®­ç»ƒè¥ã€‹](https://mp.weixin.qq.com/s/b6fpU-oXSo8qKP_Nc8w0Zg)å°±èƒ½ä¸Šæ‰‹åšAIé¡¹ç›®ã€‚