---
title: ç¬¬ 4 è®² æè¿°ç¬¦åè®®ä¸å±æ€§æ‹¦æˆª  
date: 2025-07-20 04:41:49
tags: [ç¬¬ä¸‰æ–¹åº“,pyinstaller]
---




<p align="center" id='è¿›ç¾¤-banner-AI'>
    <a target="_blank" href='http://www.python4office.cn/wechat-group/'>
    <img src="https://raw.atomgit.com/user-images/assets/5027920/87fc1ca4-1a6c-47b8-b234-3e323a1aa827/aiq.jpg" width="100%"/>
    </a>   
</p>

<p align="center">
	ğŸ‘‰ <a target="_blank" href="https://www.python-office.com/">é¡¹ç›®å®˜ç½‘ï¼šhttps://www.python-office.com/</a> ğŸ‘ˆ
</p>
<p align="center">
	ğŸ‘‰ <a target="_blank" href="http://www.python4office.cn/wechat-group/">æœ¬å¼€æºé¡¹ç›®çš„äº¤æµç¾¤</a> ğŸ‘ˆ
</p>



<p align="center" name="atomgit">
  <a target="_blank" href='https://github.com/CoderWanFeng/python-office'>
    <img src="https://img.shields.io/github/stars/CoderWanFeng/python-office.svg?style=social" alt="github star"/>
    </a>
    	<a target="_blank" href='https://gitee.com/CoderWanFeng//python-office/'>
		<img src='https://gitee.com/CoderWanFeng//python-office/badge/star.svg?theme=dark' alt='gitee star'/>
	</a>
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
		<img src='https://atomgit.com/CoderWanFeng1/python-office/star/2025top.svg?theme=dark' alt='atomgit star'/>
	</a>	
</p>
<p align="center" name="atomgit">
	<a href="https://mp.weixin.qq.com/s/b6fpU-oXSo8qKP_Nc8w0Zg">
  <img src="https://img.shields.io/badge/å­¦ä¹ -AIç¼–ç¨‹-red" alt="AIç¼–ç¨‹">
</a>
    	<a href="http://www.python4office.cn/wechat-group/">
  <img src="https://img.shields.io/badge/åŠ å…¥-AIäº¤æµç¾¤-brightgreen" alt="AIäº¤æµç¾¤">
</a>

</p>

<!-- more -->



å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯ç¨‹åºå‘˜æ™šæ«ï¼Œæ­£åœ¨all in [å„ç§AIé¡¹ç›®](https://mp.weixin.qq.com/s/XQhCrkbumDqtOZXuapMpVg)ï¼Œå…¨ç½‘åŒåã€‚


ï¼ˆ2.5 h ç›´æ’­ / å½•æ’­å¯æ‹† 2 æ¬¡ï¼‰

ç›®æ ‡  
â€¢ å½»åº•åƒé€ `@property` çš„åº•å±‚åŸç†ï¼šæè¿°ç¬¦åè®®  
â€¢ èƒ½ç”¨æ•°æ®æè¿°ç¬¦åšå­—æ®µæ ¡éªŒã€ç¼“å­˜ã€å±æ€§æ–‡æ¡£åŒ–  
â€¢ å†™ä¸€ä¸ªè¿·ä½  ORM å­—æ®µç±»å‹ç³»ç»Ÿï¼Œå¹¶æ‚„æ‚„æ¤å…¥ã€Œç¨‹åºå‘˜æ™šæ«ã€å½©è›‹

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.0 å¼€åœº 3 min  
â€œ90 % çš„ Python æ¡†æ¶éƒ½åœ¨ç”¨æè¿°ç¬¦ï¼Œä½ å´åªè®¤è¯† `@property`ï¼Ÿä»Šå¤©è®©ä½ ä¸€æ¬¡æ‰“é€šã€‚â€

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.1 æè¿°ç¬¦åè®®é€Ÿé€šï¼ˆ10 minï¼‰  
ä¸€ä¸ªç±»åªè¦å®ç°ä¸‹é¢ä»»æ„ä¸€ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯æè¿°ç¬¦ï¼š  
```
__get__(self, obj, owner)
__set__(self, obj, value)
__delete__(self, obj)
```  
ä¼˜å…ˆçº§ï¼šæ•°æ®æè¿°ç¬¦ï¼ˆåŒæ—¶æœ‰ `__get__` + `__set__`ï¼‰ > å®ä¾‹å±æ€§ > éæ•°æ®æè¿°ç¬¦ï¼ˆä»…æœ‰ `__get__`ï¼‰ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.2 æ‰‹å†™ @propertyï¼ˆ15 minï¼‰  
ç°åœºæŠŠ `Celsius` æ¸©åº¦ç±»é‡æ„ä¸ºæè¿°ç¬¦ï¼š

```python
class Celsius:
    def __init__(self):
        self._value = 0.0

    def __get__(self, obj, owner):
        return self._value

    def __set__(self, obj, value):
        if not -273.15 <= value <= 1e6:
            raise ValueError("ç¨‹åºå‘˜æ™šæ«æé†’ï¼šæ¸©åº¦ä¸åˆæ³•ï¼")
        self._value = float(value)

class Room:
    temp = Celsius()

>>> r = Room()
>>> r.temp = 25
>>> r.temp
25.0
>>> r.temp = 5000
ValueError: ç¨‹åºå‘˜æ™šæ«æé†’ï¼šæ¸©åº¦ä¸åˆæ³•ï¼
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.3 æ•°æ®æè¿°ç¬¦ vs éæ•°æ®æè¿°ç¬¦ä¼˜å…ˆçº§å®éªŒï¼ˆ10 minï¼‰  
ç”¨ `__dict__` æŸ¥çœ‹å±æ€§è¦†ç›–é¡ºåºï¼Œç»“è®ºï¼š  
å®ä¾‹å±æ€§ < ç±»å±æ€§ï¼ˆæ•°æ®æè¿°ç¬¦ï¼‰ < ç±»å±æ€§ï¼ˆéæ•°æ®æè¿°ç¬¦ï¼‰ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.4 å®æˆ˜ï¼šè¿·ä½  ORM å­—æ®µæ ¡éªŒå™¨ï¼ˆ45 minï¼‰  
éœ€æ±‚ï¼šåƒ Django ORM é‚£æ ·å£°æ˜å­—æ®µç±»å‹å’Œçº¦æŸã€‚  
4.4.1 åŸºç±»æè¿°ç¬¦  

```python
class Field:
    def __init__(self, *, required=True, default=None, max_length=None):
        self.required = required
        self.default = default
        self.max_length = max_length
        self.name = None  # ç”±å…ƒç±»æ³¨å…¥

    def __set_name__(self, owner, name):
        self.name = name

    def __get__(self, obj, owner):
        if obj is None:
            return self
        return obj.__dict__.get(self.name, self.default)

    def __set__(self, obj, value):
        if self.required and value is None:
            raise ValueError(f"{self.name} æ˜¯å¿…å¡«å­—æ®µ")
        if self.max_length and len(str(value)) > self.max_length:
            raise ValueError(f"{self.name} è¶…é•¿ï¼Œç¨‹åºå‘˜æ™šæ«éƒ½çœ‹ä¸ä¸‹å»äº†")
        obj.__dict__[self.name] = value
```

4.4.2 å…·ä½“å­—æ®µç±»å‹  

```python
class StringField(Field):
    def __set__(self, obj, value):
        if not isinstance(value, str):
            raise TypeError("å¿…é¡»æ˜¯ str")
        super().__set__(obj, value)

class IntField(Field):
    def __set__(self, obj, value):
        if not isinstance(value, int):
            raise TypeError("å¿…é¡»æ˜¯ int")
        super().__set__(obj, value)
```

4.4.3 ä½¿ç”¨ç¤ºä¾‹ + å½©è›‹  

```python
class User:
    name = StringField(max_length=16)
    age  = IntField(default=0)

>>> u = User()
>>> u.name = "æ™šæ«"
>>> u.age  = 300
ValueError: age è¶…é•¿ï¼Œç¨‹åºå‘˜æ™šæ«éƒ½çœ‹ä¸ä¸‹å»äº†
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.5 åªè¯»ç±»å˜é‡ï¼ˆ10 minï¼‰  
ç”¨éæ•°æ®æè¿°ç¬¦å®ç°ä¸å¯å†™å¸¸é‡ï¼š  

```python
class Constant:
    def __init__(self, value):
        self.value = value
    def __get__(self, obj, owner):
        return self.value
    # æ²¡æœ‰ __set__ â†’ åªè¯»

class Config:
    VERSION = Constant("v4.2.0")

>>> Config.VERSION
'v4.2.0'
>>> Config.VERSION = "v5"
AttributeError: can't set attribute
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.6 æè¿°ç¬¦ + ç¼“å­˜ï¼ˆ15 minï¼‰  
éœ€æ±‚ï¼šè®¡ç®—å±æ€§åªç®—ä¸€æ¬¡ï¼Œåç»­ç›´æ¥è¯»ç¼“å­˜ã€‚  

```python
class cached_property:
    def __init__(self, func):
        self.func = func
        self.name = func.__name__

    def __get__(self, obj, owner):
        if obj is None:
            return self
        if self.name not in obj.__dict__:
            obj.__dict__[self.name] = self.func(obj)
        return obj.__dict__[self.name]

class Circle:
    def __init__(self, r):
        self.r = r

    @cached_property
    def area(self):
        print("ç¨‹åºå‘˜æ™šæ«å¸®ä½ ç®—äº†ä¸‹é¢ç§¯ï¼Œç¼“å­˜äº†~")
        return 3.1416 * self.r ** 2

>>> c = Circle(2)
>>> c.area   # ç¬¬ä¸€æ¬¡è®¡ç®—
ç¨‹åºå‘˜æ™šæ«å¸®ä½ ç®—äº†ä¸‹é¢ç§¯ï¼Œç¼“å­˜äº†~
12.5664
>>> c.area   # ç¬¬äºŒæ¬¡ç›´æ¥è¯»ç¼“å­˜
12.5664
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.7 è°ƒè¯•æŠ€å·§ & å•å…ƒæµ‹è¯•ï¼ˆ15 minï¼‰  
â€¢ ç”¨ `inspect.getmembers` æŸ¥çœ‹æè¿°ç¬¦å®ä¾‹  
â€¢ `pytest` å‚æ•°åŒ–æµ‹è¯•å­—æ®µæ ¡éªŒï¼š  

```python
import pytest
from model import User

@pytest.mark.parametrize("name,expect", [
    ("a"*17, ValueError),
    (None,   ValueError),
    ("ok",   "ok"),
])
def test_user_name(name, expect):
    u = User()
    if expect is ValueError:
        with pytest.raises(ValueError):
            u.name = name
    else:
        u.name = name
        assert u.name == expect
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.8 ç»¼åˆæ¡ˆä¾‹ï¼šç”¨æè¿°ç¬¦åšæ•°æ®åº“è¿æ¥æ± ï¼ˆ20 minï¼‰  
éœ€æ±‚ï¼šç±»å±æ€§çº§åˆ«çš„è¿æ¥æ± ï¼Œé˜²æ­¢æ¯æ¬¡å®ä¾‹åŒ–éƒ½æ–°å»ºè¿æ¥ã€‚  

```python
class PoolDescriptor:
    def __init__(self, max_conn=5):
        self.pool = None
        self.max_conn = max_conn

    def __get__(self, obj, owner):
        if self.pool is None:
            print("[ç¨‹åºå‘˜æ™šæ«] åˆ›å»ºè¿æ¥æ± ...")
            self.pool = create_pool(max_conn=self.max_conn)
        return self.pool

class DB:
    pool = PoolDescriptor()

>>> DB.pool is DB.pool  # å•ä¾‹
True
```

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.9 å°ç»“ & æ€ç»´å¯¼å›¾ï¼ˆ5 minï¼‰  
æè¿°ç¬¦åè®® â†’ æ•°æ®/éæ•°æ®ä¼˜å…ˆçº§ â†’ å­—æ®µæ ¡éªŒ â†’ ç¼“å­˜ â†’ åªè¯»å¸¸é‡

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  
4.10 è¯¾åä½œä¸š  
1. å¿…åšï¼šæŠŠè¿·ä½  ORM æ‰©å±•å‡º `FloatField` ä¸ `EmailField`ï¼Œå¹¶åœ¨é”™è¯¯æç¤ºé‡ŒåŠ ã€Œç¨‹åºå‘˜æ™šæ«ã€å½©è›‹ã€‚  
2. é€‰åšï¼šå®ç°ä¸€ä¸ª `lazy_import` æè¿°ç¬¦ï¼Œé¦–æ¬¡è®¿é—®æ—¶æ‰ `importlib.import_module`ã€‚  
3. æŒ‘æˆ˜ï¼šé˜…è¯» SQLAlchemy Column æè¿°ç¬¦æºç ï¼Œåˆ—å‡º 3 ä¸ªæ¯”æœ¬è¯¾æ›´é«˜çº§çš„ç”¨æ³•ã€‚

æäº¤ï¼š  
â€¢ ä»£ç  push åˆ° `feat/lesson4`  
â€¢ è‡ªåŠ¨è¯„æµ‹ï¼šå­—æ®µæ ¡éªŒ + æè¿°ç¬¦å•ä¾‹æµ‹è¯•

ï¼ˆç¬¬ 4 è®²å®Œï¼‰

----

å¤§å®¶åœ¨å­¦ä¹ è¯¾ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿+å¾®ä¿¡å’Œæˆ‘äº¤æµğŸ‘‰[æˆ‘çš„è”ç³»æ–¹å¼ï¼šå¾®ä¿¡ã€è¯»è€…ç¾¤ã€1å¯¹1ã€ç¦åˆ©](http://www.python4office.cn/wechat-qrcode/)


![](https://cos.python-office.com/ads/gzh/sub-py.jpg)

![æ‰«ä¸€æ‰«ï¼Œé¢†çº¢åŒ…](https://raw.atomgit.com/user-images/assets/5027920/fad13012-c22f-4c3a-b56e-c70787a55699/172ca166340cd6d0f52d356402901d4f.jpg '6152d8017a3595256e51cbd9e08e148b.png')
  
![ç¾å›¢çº¢åŒ…](https://raw.atomgit.com/user-images/assets/5027920/6aa9a60e-bb4a-423c-a75d-cbd6ecf6f370/4dbea2fec93c415c75311666f19a1022.jpg '6d283319df13b09a3f74a9f19bf18a97.jpg')



