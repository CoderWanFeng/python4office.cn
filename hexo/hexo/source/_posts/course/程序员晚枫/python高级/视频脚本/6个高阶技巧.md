---
title: 6ä¸ªç‚¸è£‚æŠ€å·§ï¼3åˆ†é’Ÿè®©åŒäº‹ä»¥ä¸ºä½ å·å·å†™äº†3å¹´ä»£ç ï½œPythonè‡ªåŠ¨åŒ–åŠå…¬ç¤¾åŒºé«˜é˜¶è®²å ‚
date: 2025-08-14 00:41:49
tags: [ ç¬¬ä¸‰æ–¹åº“,é«˜é˜¶è¯¾ç¨‹ ]
---


<p align="center" id='è¿›ç¾¤-banner-AI'>
    <a target="_blank" href='http://www.python4office.cn/wechat-group/'>
    <img src="https://raw.atomgit.com/user-images/assets/5027920/87fc1ca4-1a6c-47b8-b234-3e323a1aa827/aiq.jpg" width="100%"/>
    </a>   
</p>

<p align="center">
	ğŸ‘‰ <a target="_blank" href="https://www.python-office.com/">é¡¹ç›®å®˜ç½‘ï¼šhttps://www.python-office.com/</a> ğŸ‘ˆ
</p>
<p align="center">
	ğŸ‘‰ <a target="_blank" href="http://www.python4office.cn/wechat-group/">æœ¬å¼€æºé¡¹ç›®çš„äº¤æµç¾¤</a> ğŸ‘ˆ
</p>



<p align="center" name="atomgit">
  <a target="_blank" href='https://github.com/CoderWanFeng/python-office'>
    <img src="https://img.shields.io/github/stars/CoderWanFeng/python-office.svg?style=social" alt="github star"/>
    </a>
    	<a target="_blank" href='https://gitee.com/CoderWanFeng//python-office/'>
		<img src='https://gitee.com/CoderWanFeng//python-office/badge/star.svg?theme=dark' alt='gitee star'/>
	</a>
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
		<img src='https://atomgit.com/CoderWanFeng1/python-office/star/2025top.svg?theme=dark' alt='atomgit star'/>
	</a>	
</p>
<p align="center" name="atomgit">
	<a href="https://mp.weixin.qq.com/s/j8C-AsOGGM43vA0hXoCawg">
  <img src="https://img.shields.io/badge/å­¦ä¹ -AIç¼–ç¨‹-red" alt="AIç¼–ç¨‹">
</a>
    	<a href="http://www.python4office.cn/wechat-group/">
  <img src="https://img.shields.io/badge/åŠ å…¥-AIäº¤æµç¾¤-brightgreen" alt="AIäº¤æµç¾¤">
</a>

</p>

<!-- more -->


![image.png](https://raw.atomgit.com/user-images/assets/5027920/f2591dab-2e17-45dd-965a-773a556c3c06/image.png 'image.png')

å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯ç¨‹åºå‘˜æ™šæ«ï¼Œæ­£åœ¨all in [AIç¼–ç¨‹å®æˆ˜](https://mp.weixin.qq.com/s/j8C-AsOGGM43vA0hXoCawg)ï¼Œå…¨ç½‘åŒåã€‚

3å¹´ç»éªŒPythonå·¥ç¨‹å¸ˆï¼Œè¢«å®ä¹ ç”Ÿç”¨10è¡Œä»£ç å½“åœºç§’æ€ï¼Ÿä»Šå¤©è¿™ç¯‡æ–‡ç« ï¼Œå¸¦ä½ 3åˆ†é’ŸæŒæ¡6ä¸ªé«˜é˜¶æŠ€å·§ï¼Œç›´æ¥å¼€æŒ‚ï¼

> é¦–å…ˆè¯´æ˜ï¼šä»Šå¤©åˆ†äº«çš„è¿™äº›æŠ€å·§ï¼Œä¸æ˜¯ç½‘ä¸Šå“ªäº›ç”¨ä¸€äº›èŠ±é‡Œèƒ¡å“¨çš„å…¥é—¨è¯­æ³•ï¼ŒæŠŠå¤šè¡Œä»£ç åˆå¹¶ä¸ºä¸€è¡Œé‚£ä¹ˆæ— èŠã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æŠ€å·§ 1 collections.Counter


åˆšå­¦ç®—æ³•çš„æ—¶å€™ï¼Œç»å¸¸é‡åˆ°ç»Ÿè®¡è¯é¢‘çš„é—®é¢˜ã€‚

ä½ æœ‰æ²¡æœ‰ç”¨è¿‡PythonåŸç”Ÿçš„collectionsè¿™ä¸ªåº“ï¼Ÿ

```python

from collections import Counter

text = '''
Python è‡ªåŠ¨åŒ– æ™šæ« python-office åŠå…¬ python-office Python è‡ªåŠ¨åŒ– python-office è‡ªåŠ¨åŒ– åŠå…¬ æ™šæ« ç¨‹åºå‘˜ æ™šæ« python-office
'''

# ä¸€è¡Œå‡ºè¯é¢‘æ’è¡Œæ¦œ
top3 = Counter(text.split()).most_common(3)
print(top3)  # [('python-office', 4), ('è‡ªåŠ¨åŒ–', 3), ('æ™šæ«', 3)]
```
collectionsè¿™ä¸ªæ¨¡å—å®ç°äº†ä¸€äº›ä¸“é—¨åŒ–çš„å®¹å™¨ï¼Œæä¾›äº†å¯¹ Python çš„é€šç”¨å†…å»ºå®¹å™¨ dictã€listã€set å’Œ tuple çš„è¡¥å……ã€‚

Counter æ˜¯ dict çš„å­ç±»ï¼Œç”¨äºè®¡æ•° hashable å¯¹è±¡ã€‚å®ƒæ˜¯ä¸€ä¸ªå¤šé¡¹é›†ï¼Œå…ƒç´ å­˜å‚¨ä¸ºå­—å…¸çš„é”®è€Œå®ƒä»¬çš„è®¡æ•°å­˜å‚¨ä¸ºå­—å…¸çš„å€¼ã€‚è®¡æ•°å¯ä»¥æ˜¯ä»»ä½•æ•´æ•°ï¼ŒåŒ…æ‹¬é›¶æˆ–è´Ÿçš„è®¡æ•°å€¼ã€‚Counter ç±»ä¸å…¶ä»–è¯­è¨€ä¸­çš„ bag æˆ– multiset å¾ˆç›¸ä¼¼ã€‚

> æ‰©å±•é˜…è¯»ï¼šhttps://docs.python.org/zh-cn/3.13/library/collections.html#collections.Counter

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æŠ€å·§ 2 è£…é¥°å™¨ç¼“å­˜

åœ¨å‡½æ•°åå’Œå‚æ•°ä¸å˜ï¼Œå¹¶ä¸”å‡½æ•°è®¡ç®—å¾ˆè€—æ—¶çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªè£…é¥°å™¨ï¼Œå¯ä»¥å¿«é€Ÿå–å‡ºä¸Šä¸€æ¬¡è®¡ç®—çš„ç»“æœã€‚

```python

import functools
import time


@functools.lru_cache(maxsize=None)  # æ— é™ç¼“å­˜
def slow_func(x):
    time.sleep(1)  # ä¸€äº›å¾ˆæ…¢çš„é€»è¾‘
    return x * x


print(slow_func(10))  # ç¬¬ä¸€æ¬¡1ç§’
print(slow_func(10))  # ç¬¬äºŒæ¬¡ç›´æ¥è¯»ç¼“å­˜ï¼Œæ¯«ç§’çº§
```

> æ‰©å±•é˜…è¯»ï¼šhttps://docs.python.org/zh-cn/3.14/library/functools.html

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æŠ€å·§ 3 ç”Ÿæˆå™¨è¡¨è¾¾å¼

è®°å¾—å½“å¹´å‚åŠ æ ¡æ‹›çš„ç¬”è¯•ï¼Œè¢«è¿™é“é¢˜éš¾ä½äº†ä¸€æ™šä¸Šï¼

```

# éœ€æ±‚ï¼šè¯»å–ç™¾ä¸‡è¡Œæ—¥å¿—ï¼Œç»Ÿè®¡å«â€œERRORâ€çš„è¡Œæ•°
# ä¼ ç»Ÿå†™æ³•ï¼Œå…ˆæŠŠæ‰€æœ‰è¡Œè¯»åˆ°å†…å­˜
with open('huge.log') as f:
    lines = f.readlines()
error_lines = [l for l in lines if 'ERROR' in l]

# é«˜é˜¶å†™æ³•ï¼šæŠŠ [] æ¢æˆ ()ï¼Œè¾¹è¯»è¾¹ç®—ï¼Œå†…å­˜æ’ç¨³
error_lines = (l for l in open('huge.log') if 'ERROR' in l)
print(sum(1 for _ in error_lines))     # ç›´æ¥è®¡æ•°ä¸å å†…å­˜
```

> æ‰©å±•é˜…è¯»ï¼šhttps://docs.python.org/zh-cn/3.14/reference/expressions.html#generator-expressions

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æŠ€å·§ 4 dataclassçœæ‰æ ·æ¿ä»£ç 

ç”¨``@dataclass``å®šä¹‰ç±»ï¼Œç®€ç›´ä¸è¦å¤ªæ–¹ä¾¿ï¼

è€Œä¸”è¿™ä¸ªç‰¹æ€§æ—©åœ¨3.7å°±å¼•å…¥Pythonäº†ï¼Œä½ ç”¨è¿‡å—ï¼Ÿ

```

from dataclasses import dataclass

@dataclass
class Employee:
    name: str
    age: int
    salary: float

# ä¸¤è¡Œæå®š__init__/__repr__/__eq__
e = Employee('å¼ ä¸‰', 28, 20000.0)
print(e)        # Employee(name='å¼ ä¸‰', age=28, salary=20000.0)
```

> æ‰©å±•é˜…è¯»ï¼šhttps://docs.python.org/zh-cn/3.14/library/dataclasses.html

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æŠ€å·§ 5 è§£åŒ…ä¸é€šé…ç¬¦

è§£åŒ…æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„ç¼–ç¨‹æŠ€å·§ï¼Œå½“éœ€è¦å–å‡ºé›†åˆæœ€åä¸€ä¸ªå…ƒç´ ï¼Œä½†ä¸çŸ¥é“é›†åˆå…ƒç´ æ€»æ•°çš„æ—¶å€™ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ

```

# éœ€æ±‚ï¼šå‡½æ•°è¿”å›å¤šä¸ªå€¼ï¼Œå¿½ç•¥ä¸­é—´æ— ç”¨å­—æ®µ
def get_user():
    return 'Alice', 28, 'alice@example.com', 'Shanghai'

name, age, _, city = get_user()      # _ å ä½å¿½ç•¥é‚®ç®±
print(name, city)

# åªæƒ³è¦é¦–å°¾ï¼Œä¸­é—´å…¨éƒ¨æ‰“åŒ…
first, *_, last = get_user()
print(first, last)      # Alice Shanghai
```

> æ‰©å±•é˜…è¯»ï¼šhttps://docs.python.org/zh-cn/3/reference/simple_stmts.html#assignment-statements

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

## æŠ€å·§ 6 å†…å­˜è§†å›¾memoryview

è¯»å–å¤§æ–‡ä»¶å¿…å¤‡ï¼

```

# éœ€æ±‚ï¼šå¤§æ–‡ä»¶åˆ‡ç‰‡ä¸å¤åˆ¶
with open('big.bin', 'rb') as f:
    mm = memoryview(f.read())    # é›¶æ‹·è´è§†å›¾

# åªè¦å‰1MBä¸å1MBæ‹¼æ¥ï¼Œä¸é¢å¤–å å†…å­˜
new_data = mm[:1024*1024] + mm[-1024*1024:]
print(len(new_data))
```

>  æ‰©å±•é˜…è¯»ï¼šhttps://docs.python.org/zh-cn/3.14/library/stdtypes.html#memory-views

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

----

å¤§å®¶åœ¨å­¦ä¹ è¯¾ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿+å¾®ä¿¡å’Œæˆ‘äº¤æµğŸ‘‰[æˆ‘çš„è”ç³»æ–¹å¼ï¼šå¾®ä¿¡ã€è¯»è€…ç¾¤ã€1å¯¹1ã€ç¦åˆ©](https://mp.weixin.qq.com/s/0GrWWSQ8sKs-WA8WoN3Ztg?payreadticket=HApWJOMvY1QHwnOqtY2a_vKLl6W8A0NXSD0xPmwQPiLcgx1eGXhgUWOQVjphM-haglI0F0g&amp;from=groupmessage&amp;scene=1&amp;subscene=318&amp;sessionid=1755158127&amp;clicktime=1755159696&amp;enterid=1755159696 )


![](https://cos.python-office.com/ads/gzh/sub-py.jpg)

![æ‰«ä¸€æ‰«ï¼Œé¢†çº¢åŒ…](https://raw.atomgit.com/user-images/assets/5027920/fad13012-c22f-4c3a-b56e-c70787a55699/172ca166340cd6d0f52d356402901d4f.jpg '6152d8017a3595256e51cbd9e08e148b.png')
  
![ç¾å›¢çº¢åŒ…](https://raw.atomgit.com/user-images/assets/5027920/6aa9a60e-bb4a-423c-a75d-cbd6ecf6f370/4dbea2fec93c415c75311666f19a1022.jpg '6d283319df13b09a3f74a9f19bf18a97.jpg')





ç¨‹åºå‘˜æ™šæ«ä¸“æ³¨AIç¼–ç¨‹åŸ¹è®­ï¼Œå°ç™½çœ‹å®Œä»–çš„æ•™ç¨‹[ã€Š30è®² Â· AIç¼–ç¨‹è®­ç»ƒè¥ã€‹](https://mp.weixin.qq.com/s/j8C-AsOGGM43vA0hXoCawg)å°±èƒ½ä¸Šæ‰‹åšAIé¡¹ç›®ã€‚