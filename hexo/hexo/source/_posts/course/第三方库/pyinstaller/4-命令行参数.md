---
title: ç¬¬å››è®²ï¼šå‘½ä»¤è¡Œå‚æ•°å…¨è§£æ     
date: 2025-07-14 04:41:49
tags: [ç¬¬ä¸‰æ–¹åº“,pyinstaller]
---




<p align="center" id='è¿›ç¾¤-banner-AI'>
    <a target="_blank" href='http://www.python4office.cn/wechat-group/'>
    <img src="https://raw.atomgit.com/user-images/assets/5027920/87fc1ca4-1a6c-47b8-b234-3e323a1aa827/aiq.jpg" width="100%"/>
    </a>   
</p>

<p align="center">
	ğŸ‘‰ <a target="_blank" href="https://www.python-office.com/">é¡¹ç›®å®˜ç½‘ï¼šhttps://www.python-office.com/</a> ğŸ‘ˆ
</p>
<p align="center">
	ğŸ‘‰ <a target="_blank" href="http://www.python4office.cn/wechat-group/">æœ¬å¼€æºé¡¹ç›®çš„äº¤æµç¾¤</a> ğŸ‘ˆ
</p>



<p align="center" name="atomgit">
  <a target="_blank" href='https://github.com/CoderWanFeng/python-office'>
    <img src="https://img.shields.io/github/stars/CoderWanFeng/python-office.svg?style=social" alt="github star"/>
    </a>
    	<a target="_blank" href='https://gitee.com/CoderWanFeng//python-office/'>
		<img src='https://gitee.com/CoderWanFeng//python-office/badge/star.svg?theme=dark' alt='gitee star'/>
	</a>
	<a target="_blank" href='https://atomgit.com/CoderWanFeng1/python-office'>
		<img src='https://atomgit.com/CoderWanFeng1/python-office/star/2025top.svg?theme=dark' alt='atomgit star'/>
	</a>	
</p>
<p align="center" name="atomgit">
	<a href="https://mp.weixin.qq.com/s/BXWg_LXreNCI-UlrckZrTw">
  <img src="https://img.shields.io/badge/å­¦ä¹ -AIç¼–ç¨‹-red" alt="AIç¼–ç¨‹">
</a>
    	<a href="http://www.python4office.cn/wechat-group/">
  <img src="https://img.shields.io/badge/åŠ å…¥-AIäº¤æµç¾¤-brightgreen" alt="AIäº¤æµç¾¤">
</a>

</p>

<!-- more -->



å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯ç¨‹åºå‘˜æ™šæ«ï¼Œæ­£åœ¨all in [AIç¼–ç¨‹å®æˆ˜](https://mp.weixin.qq.com/s/BXWg_LXreNCI-UlrckZrTw)ï¼Œå…¨ç½‘åŒåã€‚


ï¼ˆå¯¹åº”â€œå¸¸ç”¨å¼€å…³ã€éšè—å¯¼å…¥ã€èµ„æºæ†ç»‘ã€UPXã€ç‰ˆæœ¬ä¿¡æ¯â€ä¸€æ¬¡è®²é€ï¼‰

--------------------------------------------------
å¼€åœº 30 ç§’  
â€œCLI å‚æ•°è®°ä¸ä½ï¼Ÿä¸€è¡Œå‘½ä»¤å°±èƒ½å®Œæˆ 80 % åœºæ™¯ï¼Œä½†å‰ææ˜¯ä½ çŸ¥é“å“ªäº›å¼€å…³è¯¥æ‹§å“ªé¢—èºä¸ã€‚â€  
æœ¬è®² 15 åˆ†é’Ÿï¼ŒæŠŠæœ€å¸¸ç”¨çš„ 12 ä¸ªå‚æ•°åšæˆã€Œé€ŸæŸ¥å¡ã€ï¼ŒéšæŠ„éšç”¨ã€‚

--------------------------------------------------
4.0 é€ŸæŸ¥è¡¨ï¼ˆå…ˆæ”¶è—ï¼Œå†ç»†è¯»ï¼‰

| ç›®æ ‡ | å…³é”®å¼€å…³ | ç¤ºä¾‹ | å¤‡æ³¨ |
|---|---|---|---|
| å•æ–‡ä»¶ | `--onefile` | `pyinstaller --onefile main.py` | å¯åŠ¨ç¨æ…¢ |
| å•ç›®å½• | `--onedir` | é»˜è®¤ | è°ƒè¯•é˜¶æ®µæ›´å¿« |
| æ”¹å | `--name` | `--name MyTool` | ç”Ÿæˆçš„ exe / æ–‡ä»¶å¤¹å |
| æ— é»‘æ¡† | `--noconsole` / `--windowed` | GUI ç¨‹åºå¿…åŠ  | Win ç”¨ `--noconsole`ï¼ŒmacOS ç”¨ `--windowed` |
| å›¾æ ‡ | `--icon` | `--icon=app.ico` | Win: `.ico`, macOS: `.icns` |
| æ•°æ®æ–‡ä»¶ | `--add-data` | `--add-data "data;data"` | Win ç”¨ `;`ï¼ŒLinux/Mac ç”¨ `:` |
| äºŒè¿›åˆ¶æ–‡ä»¶ | `--add-binary` | `--add-binary "driver/*.dll;."` | åŒä¸Š |
| éšè—å¯¼å…¥ | `--hidden-import` | `--hidden-import pkg.sub` | è§£å†³åŠ¨æ€ import æŠ¥é”™ |
| æ’é™¤æ¨¡å— | `--exclude-module` | `--exclude-module matplotlib` | ç˜¦èº«åˆ©å™¨ |
| UPX å‹ç¼© | `--upx-dir` / `--upx-exclude` | `--upx-dir /usr/local/bin` | éœ€å…ˆè£… UPX |
| ç‰ˆæœ¬ä¿¡æ¯ | `--version-file` | `--version-file version.txt` | Win ä¸“ç”¨ |
| å¼ºåˆ¶è¦†ç›– | `--noconfirm` | ä¸å¼¹å‡º â€œæ˜¯å¦åˆ é™¤ buildâ€ | CI/CD å¸¸ç”¨ |

--------------------------------------------------
4.1 æœ€å°å¯è¡Œç»„åˆï¼ˆ90 % åœºæ™¯ï¼‰

```bash
pyinstaller --onefile --name MyTool --icon app.ico --add-data "data;data" main.py
```
è§£é‡Šï¼š  
- å•æ–‡ä»¶ã€æ”¹åå­—ã€åŠ å›¾æ ‡ã€é¡ºå¸¦æŠŠ `data/` æ–‡ä»¶å¤¹ä¸€èµ·æ‰“åŒ…ã€‚

--------------------------------------------------
4.2 éšè—å¯¼å…¥ä¸æ’é™¤æ¨¡å—ï¼ˆ2 minï¼‰

ç°è±¡ï¼šè¿è¡Œæ—¶æŠ¥ `ModuleNotFoundError: No module named 'xyz'`ï¼Œä½†æœ¬åœ°èƒ½è·‘ã€‚  
åŸå› ï¼šPyInstaller çš„é™æ€åˆ†ææ‰¾ä¸åˆ° `__import__` / `importlib` åŠ¨æ€åŠ è½½çš„æ¨¡å—ã€‚  
è§£å†³ï¼š  
```bash
pyinstaller main.py --hidden-import xyz --hidden-import abc.def
```
ç˜¦èº«åé¢æ¡ˆä¾‹ï¼š  
```bash
pyinstaller main.py --exclude-module matplotlib --exclude-module PyQt5
```

--------------------------------------------------
4.3 UPX å‹ç¼©å®æˆ˜ï¼ˆ2 minï¼‰

1. å®‰è£…  
   - Windowsï¼šä¸‹è½½ upx.exe æ”¾åˆ° PATH  
   - macOSï¼š`brew install upx`  
   - Linuxï¼š`apt install upx`

2. æ‰“åŒ…  
```bash
pyinstaller --onefile --upx-dir /usr/local/bin --upx-exclude "vcruntime140.dll" main.py
```
ç»éªŒï¼š  
- DLL/æŸäº› PyQt æ’ä»¶è¢« UPX å‹åæ—¶ï¼Œç”¨ `--upx-exclude` é»‘åå•è·³è¿‡ã€‚  
- ä½“ç§¯ä¸€èˆ¬å†å‡ 30 % ~ 50 %ã€‚

--------------------------------------------------
4.4 ç‰ˆæœ¬ä¿¡æ¯ä¸€ç«™å¼ç”Ÿæˆï¼ˆWindowsï¼Œ2 minï¼‰

å®˜æ–¹æ¨¡æ¿å¤ªé•¿ï¼Ÿç”¨ `pyinstaller-versionfile` ä¸€é”®ç”Ÿæˆï¼š  
```bash
pip install pyinstaller-versionfile
pyinstaller-versionfile --version 1.2.3.4 \
                        --company "Acme Corp" \
                        --product "MyTool" \
                        --file-description "æ•°æ®å¤„ç†å°å·¥å…·" \
                        --copyright "(c) 2024" \
                        --output version.txt
```
ç„¶åï¼š  
```bash
pyinstaller --onefile --version-file version.txt main.py
```
å³é”® exe â†’ å±æ€§ â†’ è¯¦ç»†ä¿¡æ¯ï¼Œç‰ˆæœ¬å·ã€å…¬å¸åã€ç‰ˆæƒå…¨éƒ¨å°±ä½ã€‚

--------------------------------------------------
4.5 ä¸€æ¡å‘½ä»¤å¤ªé•¿ï¼Ÿè½¬ `.spec` ç»§ç»­æ‹§èºä¸ï¼ˆ1 minï¼‰

```bash
pyi-makespec --onefile --name MyTool --icon app.ico --add-data "data;data" main.py
```
ç”Ÿæˆ `MyTool.spec` åï¼Œæƒ³å†æ”¹ UPXã€éšè—å¯¼å…¥ï¼Œç›´æ¥æ”¹ specï¼Œå†ï¼š
```bash
pyinstaller MyTool.spec
```

--------------------------------------------------
å°ç»“ & ä¸‹èŠ‚é¢„å‘Šï¼ˆ30 ç§’ï¼‰

â€¢ è®°ç‰¢ 12 ä¸ªé«˜é¢‘å¼€å…³ï¼Œ90 % åœºæ™¯å¤Ÿç”¨  
â€¢ åŠ¨æ€ import æŠ¥é”™ â†’ `--hidden-import`  
â€¢ ç˜¦èº«ä¸‰æ¿æ–§ï¼š`--exclude-module`ã€`--upx-dir`ã€`--exclude-module`

ä¸‹èŠ‚è¯¾ã€Šç¬¬äº”è®²ï¼š.spec æ–‡ä»¶æ·±åº¦å®šåˆ¶ã€‹å¸¦ä½ æŠŠ CLI å‚æ•°â€œç¿»è¯‘â€æˆå¯è¯»å¯æ”¹çš„ Python è„šæœ¬ï¼Œå¼€å¯é«˜çº§ç©æ³•ã€‚


----

å¤§å®¶åœ¨å­¦ä¹ è¯¾ç¨‹ä¸­æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿+å¾®ä¿¡å’Œæˆ‘äº¤æµğŸ‘‰[æˆ‘çš„è”ç³»æ–¹å¼ï¼šå¾®ä¿¡ã€è¯»è€…ç¾¤ã€1å¯¹1ã€ç¦åˆ©](http://www.python4office.cn/wechat-qrcode/)


![](https://cos.python-office.com/ads/gzh/sub-py.jpg)

![æ‰«ä¸€æ‰«ï¼Œé¢†çº¢åŒ…](https://raw.atomgit.com/user-images/assets/5027920/fad13012-c22f-4c3a-b56e-c70787a55699/172ca166340cd6d0f52d356402901d4f.jpg '6152d8017a3595256e51cbd9e08e148b.png')
  
![ç¾å›¢çº¢åŒ…](https://raw.atomgit.com/user-images/assets/5027920/6aa9a60e-bb4a-423c-a75d-cbd6ecf6f370/4dbea2fec93c415c75311666f19a1022.jpg '6d283319df13b09a3f74a9f19bf18a97.jpg')





ç¨‹åºå‘˜æ™šæ«ä¸“æ³¨AIç¼–ç¨‹åŸ¹è®­ï¼Œå°ç™½çœ‹å®Œä»–çš„æ•™ç¨‹[ã€Š30è®² Â· AIç¼–ç¨‹è®­ç»ƒè¥ã€‹](https://mp.weixin.qq.com/s/BXWg_LXreNCI-UlrckZrTw)å°±èƒ½ä¸Šæ‰‹åšAIé¡¹ç›®ã€‚